import{_ as W,bE as U,G as A,H as p,p as l,k as h,f as s,J as o,I as a,V as k,m as c,M as I,t as u,P as O,O as v,Y as M,a1 as j,a2 as q,Q as f,S as _,R as y,a0 as w,aH as N,L as B,K as b,F as E,N as K,bp as G}from"./index.a0b9c180.js";import{a as P,Q as L}from"./QScrollArea.9b72a6ed.js";import{Q as x}from"./QSkeleton.820e7de6.js";import{Q as J}from"./QVirtualScroll.d4802c6e.js";import{C as X,a as Y,Q as Z}from"./QInfiniteScroll.4727592b.js";import{b as Q}from"./QChip.965b654f.js";import{L as $,Q as ee}from"./login.79107c96.js";import{a as re,b as te,c as se,Q as ie}from"./QToolbar.1e1fd264.js";import{Q as oe}from"./QPage.01e9a962.js";import{T as D}from"./QList.fb8789d5.js";import{A as m}from"./socialShare.74dd5828.js";import{a as le,P as ne}from"./providerCard.8a503441.js";import{P as ae}from"./provider.0c19dea2.js";import{S as de}from"./sort.a57a8ce5.js";import{u as ce}from"./user.366ad68b.js";import"./TouchPan.59d47c9f.js";import"./format.959830d0.js";import"./QSelect.ba7174b6.js";import"./selectApi.926667b8.js";import"./QImg.37311f50.js";import"./_commonjsHelpers.8402d862.js";import"./use-fullscreen.a0d51d97.js";const ue={name:"Search-Provider",props:{},data(){return{active:null,activeListing:0,jobTitle:"",selectedCountry:null,selectedprovider:null,clientOptions:["All Clients"],providerOptionsFiltered:[],searchOpen:!1,profileOpen:!1,results:[],resultsCount:null,search:{categoryId:0,countryId:0,text:null,sortField:"name",sortDirection:"asc"},categories:[],countries:[],loginOpen:!1,providerDrawerOpen:!1,providerWidth:200,providerId:null,resizeTimer:null,noResults:!1,view:"list",favourites:[],durations:[],loading:!1,drawerLeft:!0,scrollLoading:!1,page:1,limit:20,total:0,showPage:!1,itemHeight:200,scrollFactor:10,drawerReady:!1,lastScrollTop:0,toolbarHidden:!1}},methods:{onScroll(t){if(!this.isMobile)return;const e=t.verticalPosition;e>this.lastScrollTop+5?(this.toolbarHidden=!0,this.$emit("scrollOn")):e<this.lastScrollTop-5&&!this.scrollLoading&&(this.toolbarHidden=!1,this.$emit("scrollOff")),this.lastScrollTop=e},openProvider(t,e){if(this.providerDrawerOpen){this.providerDrawerOpen=!1;return}this.providerId=t.id,this.providerDrawerOpen=!0,U.postProviderClick(()=>{},null,t.id)},onDrawerShow(){this.drawerReady=!0},closeLogin(t){this.loginOpen=!1},clearSearch(){this.search.countryId=0,this.search.categoryId=0,this.search.text="",this.goSearch()},goSearch(){this.searchOpen=!1,this.loading=!0,this.scrollLoading=!1,this.$q.platform.is.mobile&&this.results.length>0&&(this.drawerLeft=!1),this.page=1,this.results=[],this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.$refs.infiniteScroll.trigger(),m.getFavouritesProviders(t=>{this.favourites=t,this.searchOpen=!0})},isFavourite(t){return console.log("f",t,this.favourites.some(e=>e.id===t)),this.favourites.some(e=>e.id===t)},setFavourite(){return!1},goProfile(t){this.$router.push({query:{id:t}}),this.profileOpen=!0},closeProfile(){this.profileOpen=!1,this.$router.push({query:{}})},process(t){this.results=t,this.loading=!1,this.noResults=this.results.length===0},processDurations(t){this.durations=t},updateWidth(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.$nextTick(()=>{this.$refs.search&&(this.providerWidth=this.$q.screen.width-this.$refs.search.$el.offsetWidth-20,this.providerWidth>700&&(this.providerWidth=700),this.providerWidth=700),console.log("ds",this.providerWidth)})},50)},loadMore(t,e){this.scrollLoading||(this.scrollLoading=!0,m.postSearchProvidersPages(d=>{this.results.push(...d.results),this.resultsCount=d.count,this.page++,this.loading=!1,this.noResults=this.results.length===0,d.results.length<this.limit?e(!0):e(),this.scrollLoading=!1},()=>{e(!0),this.scrollLoading=!1},this.limit,this.page,this.search))},setScroll(){this.$nextTick(()=>{const t=this.$el.querySelector(".x-course-card");t&&(this.itemHeight=t.offsetHeight)})}},computed:{...A(ce,["isLoggedIn","userId","guest","cookiesAccepted","geoCountryId"]),tabStyle(){const t=this.providerWidth;return this.providerDrawerOpen?"right: "+t+"px":""},resultClass(){return this.view==="list"?"col-12":"col"},isMobile(){return this.$q.platform.is.mobile},itemsPerRow(){return this.view==="list"||this.$q.screen.lt.sm||this.$q.screen.lt.md?1:this.$q.screen.lt.lg?2:3},chunkedResults(){const t=[],e=this.itemsPerRow;for(let d=0;d<this.results.length;d+=e)t.push(this.results.slice(d,d+e));return t}},components:{Categories:X,Countries:Y,ProviderCard:le,ProviderRibbon:ne,Provider:ae,Login:$,Sort:de},mounted(){this.isLoggedIn||(this.loginOpen=!0),this.providerOptionsFiltered=this.providerOptions,this.$route.query.id&&this.goProfile(567),this.updateWidth(),window.addEventListener("resize",this.updateWidth),this.scrollLoading=!1,this.geoCountryId&&(this.search.countryId=this.geoCountryId,this.showPage=!0,this.$nextTick(()=>{this.goSearch()})),this.setScroll()},beforeUnmount(){window.removeEventListener("resize",this.updateWidth)},created(){m.getCategories(t=>{this.categories=t}),m.getCountries(t=>{this.countries=t}),m.getCoursesDurations(this.processDurations,()=>{})},watch:{geoCountryId(t){this.search.countryId=t,t>=0&&(this.showPage=!0,this.$nextTick(()=>{this.goSearch()}))},view(){this.setScroll()},courseDrawerOpen(t){t||(this.drawerReady=!1)}}},he={class:"q-pa-none fit"},pe={class:"row fit bg-primary"},fe={key:0,class:"q-pa-md scroll fit"},me={key:0,class:"row justify-start content-start items-start col-12 q-pr-sm q-pt-md items-stretch"},ge={class:"full-width"},ve={class:"full-width text-center q-mt-xl"},ye={key:1,class:"row justify-center",style:{height:"100vh!important","margin-top":"76px"}},we={class:"row justify-center q-my-md full-width"},be={class:"mobile-only text-right col"};function xe(t,e,d,Se,r,n){const T=p("countries"),V=p("categories"),S=p("provider"),z=p("sort"),R=p("login");return l(),h("div",he,[s(re,{view:"hHh LpR lFf",container:"",class:"no-border fit"},{default:o(()=>[I((l(),a(P,{modelValue:r.drawerLeft,"onUpdate:modelValue":e[4]||(e[4]=i=>r.drawerLeft=i),width:250,"show-if-above":"",behavior:n.isMobile?"mobile":"desktop",bordered:"",class:"bg-primary","content-class":"scroll ",ref:"search"},{default:o(()=>[u("div",pe,[s(O,{flat:"",square:"",class:"no-border bg-primary"},{default:o(()=>[s(v,{class:"bg-primary text-white q-py-sm no-border"},{default:o(()=>[...e[15]||(e[15]=[u("div",{class:"text-h6 text-bold"},"Providers",-1)])]),_:1}),s(v,{class:"flex q-px-xs q-pb-none bg-primary"},{default:o(()=>[s(T,{onChange:e[0]||(e[0]=i=>{n.goSearch()}),keep:"",any:"",dark:"",availablex:"",providers:"",filled:"",countryId:r.search.countryId,"onUpdate:countryId":e[1]||(e[1]=i=>r.search.countryId=i),class:"col-12 q-mb-md full-width",label:"Location"},null,8,["countryId"]),s(M),s(V,{onChange:n.goSearch,providerCountryId:r.search.countryId,keep:"",any:"",available:"",providers:"",filled:"",dark:"",categoryId:r.search.categoryId,"onUpdate:categoryId":e[2]||(e[2]=i=>r.search.categoryId=i),label:"Category",class:"col-12 q-mb-md full-width",stylex:"max-width:200px"},null,8,["onChange","providerCountryId","categoryId"])]),_:1}),s(v,{class:"flex q-pt-none q-pl-xs q-pr-md"},{default:o(()=>[s(j,{class:"col-12 full-width text-bold q-pl-none","input-class":"",dense:"",dark:"",outlined:"",modelValue:r.search.text,"onUpdate:modelValue":e[3]||(e[3]=i=>r.search.text=i),label:"Search...","bg-color":"primary"},null,8,["modelValue"])]),_:1}),s(q,null,{default:o(()=>[s(f,{class:"full-width col-12 text-bold bg-accent x-button",style:{height:"40px"},rounded:"",flat:"",color:"white","no-caps":"",onClick:n.goSearch},{default:o(()=>[...e[16]||(e[16]=[_("Search",-1)])]),_:1},8,["onClick"])]),_:1}),s(q,null,{default:o(()=>[s(f,{class:"full-width col-12 text-bold bg-white x-button",style:{height:"40px"},rounded:"",outline:"",color:"primary","no-caps":"",onClick:n.clearSearch},{default:o(()=>[...e[17]||(e[17]=[_("Clear",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["modelValue","behavior"])),[[D,()=>{t.drawerOpen=!1},void 0,{left:!0}]]),I((l(),a(k,{modelValue:r.providerDrawerOpen,"onUpdate:modelValue":e[6]||(e[6]=i=>r.providerDrawerOpen=i),"full-width":"","full-height":"",class:"mobile-only no-padding",persistent:"",maximized:"","transition-show":"slide-left","transition-hide":"slide-right"},{default:o(()=>[s(O,{class:"bg-white fit column no-scroll"},{default:o(()=>[u("div",{class:"x-close-tab-mobile z-top absolute-right flex items-center justify-center cursor-pointer",onClick:e[5]||(e[5]=w(i=>r.providerDrawerOpen=!1,["stop"]))},[s(y,{name:"chevron_right",color:"white",size:"sm"})]),s(L,{class:"fit"},{default:o(()=>[r.providerId?(l(),a(S,{key:0,providerId:r.providerId},null,8,["providerId"])):c("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),[[D,()=>{r.providerDrawerOpen=!1},void 0,{right:!0}]]),s(P,{modelValue:r.providerDrawerOpen,"onUpdate:modelValue":e[8]||(e[8]=i=>r.providerDrawerOpen=i),behavior:"mobile",onShow:n.onDrawerShow,width:r.providerWidth,class:"desktop-only",side:"right",elevated:"",overlay:""},{default:o(()=>[u("div",{class:"x-close-tab z-top absolute-left flex items-center justify-center cursor-pointer",onClick:e[7]||(e[7]=w(i=>r.providerDrawerOpen=!1,["stop"]))},[s(y,{name:"close",color:"white",size:"xs"})]),r.drawerReady?(l(),h("div",fe,[s(S,{providerId:r.providerId},null,8,["providerId"])])):c("",!0)]),_:1},8,["modelValue","onShow","width"]),s(te,{class:"fit"},{default:o(()=>[r.showPage?(l(),a(oe,{key:0,ref:"innerPage",padding:"",class:b(["column fit x-background-hint",{"q-pl-none":!n.isMobile,"q-pl-sm":n.isMobile}])},{default:o(()=>[r.noResults&&!r.loading?(l(),h("div",me,[u("div",ge,[u("div",ve,[s(y,{name:"sentiment_dissatisfied",color:"accent",size:"xl",class:""})]),e[18]||(e[18]=u("h1",{class:"full-width text-bold text-grey-7 q-mt-none text-center",style:{"font-size":"25px"}},"No Providers Found",-1))])])):c("",!0),r.loading?(l(),h("div",ye,[s(x,{color:"accent",size:"80px",class:"desktop-only"}),s(x,{color:"accent",size:"30px",class:"mobile-only"})])):c("",!0),(l(),a(N,null,[s(L,{class:"fit full-width",ref:"scrollArea",onScroll:n.onScroll,style:B([{height:"calc(100vh)!important","padding-topX":"66px"},{marginTop:r.toolbarHidden?"0px":"46px"}])},{default:o(()=>{var i;return[s(J,{items:n.chunkedResults,"virtual-scroll-item-size":r.itemHeight,class:"fit full-width"},{default:o(({item:F,index:C})=>[(l(),h("div",{class:b(["row full-width",{"q-col-gutter-md":!n.isMobile}]),key:C},[(l(!0),h(E,null,K(F,g=>(l(),h("div",{key:g.id,class:"col q-pb-sm"},[(l(),a(G(r.view==="list"?"provider-ribbon":"provider-card"),{class:"x-provider-card",clickable:"",onClick:w(H=>n.openProvider(g),["stop"]),onOpen:H=>n.openProvider(g),i:g,isOdd:C%2===1,durations:r.durations,categories:r.categories,countries:r.countries},null,40,["onClick","onOpen","i","isOdd","durations","categories","countries"]))]))),128))],2))]),_:1},8,["items","virtual-scroll-item-size"]),s(Z,{ref:"infiniteScroll",onLoad:n.loadMore,offset:r.itemHeight*r.scrollFactor,"scroll-target":(i=t.$refs.scrollArea)==null?void 0:i.getScrollTarget(),class:"full-width"},{loading:o(()=>[u("div",we,[r.scrollLoading?(l(),a(x,{key:0,color:"primary",size:"40px"})):c("",!0)])]),_:1},8,["onLoad","offset","scroll-target"])]}),_:1},8,["onScroll","style"])],1024)),s(se,{expand:"",position:"top",class:"q-pt-none q-pl-none"},{default:o(()=>[s(ie,{class:b(["bg-primary x-toolbar",{"x-toolbar-hidden":r.toolbarHidden}])},{default:o(()=>[s(f,{onClick:e[9]||(e[9]=i=>r.drawerLeft=!0),icon:"search",dense:"",color:"accent",outline:"",class:"mobile-only"}),s(z,{resultsType:"providers",durations:r.durations,field:r.search.sortField,"onUpdate:field":e[10]||(e[10]=i=>r.search.sortField=i),direction:r.search.sortDirection,"onUpdate:direction":e[11]||(e[11]=i=>r.search.sortDirection=i),onSort:n.goSearch,dark:""},null,8,["durations","field","direction","onSort"]),!r.noResults&&r.resultsCount>0?(l(),a(Q,{key:0,label:r.resultsCount+" results",outline:"",class:"bg-primary text-accent on-right desktop-only"},null,8,["label"])):c("",!0),u("span",be,[!r.noResults&&r.resultsCount>0?(l(),a(Q,{key:0,label:r.resultsCount,class:"bg-primary text-accent on-right"},null,8,["label"])):c("",!0)]),s(ee),s(f,{onClick:e[12]||(e[12]=i=>r.view="list"),dense:"",outline:"",color:r.view==="list"?"accent":"grey-6",icon:"list",class:"on-right q-px-xs"},null,8,["color"]),s(f,{onClick:e[13]||(e[13]=i=>r.view="grid"),dense:"",outline:"",color:r.view==="grid"?"accent":"grey-6",icon:"grid_view",class:"on-right q-px-xs"},null,8,["color"])]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])):c("",!0)]),_:1})]),_:1}),r.loginOpen?(l(),a(k,{key:0,modelValue:r.loginOpen,"onUpdate:modelValue":e[14]||(e[14]=i=>r.loginOpen=i),class:"items-start",persistent:""},{default:o(()=>[s(R,{onClose:n.closeLogin,signupOn:!0,isProvider:"",suppressRouter:!0},null,8,["onClose"])]),_:1},8,["modelValue"])):c("",!0)])}var Be=W(ue,[["render",xe],["__scopeId","data-v-6834aa8b"]]);export{Be as default};

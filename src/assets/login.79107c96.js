import{f as Y,g as A,h as Z,i as v}from"./QList.fb8789d5.js";import{Q as T}from"./QImg.37311f50.js";import{v as W,h as J,r as X,a8 as $,ah as ee,ai as te,o as se,z as le,g as oe,aj as ie,ak as D,al as ne,am as ae,an as re,Z as ue,ao as G,_ as de,H as me,p as y,I as V,J as u,f as l,m as k,t,S as q,Y as O,Q as g,a1 as h,R as K,k as j,U as P,ap as L,a0 as z,K as N,O as ce,L as pe,P as ge}from"./index.a0b9c180.js";import{S as Q,u as xe}from"./user.366ad68b.js";var C=W({name:"QSpace",setup(){const o=J("div",{class:"q-space"});return()=>o}}),he=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:e,emit:x}){const f=oe(),s=X(null);let n=0;const d=[];function i(a){const p=typeof a=="boolean"?a:o.noErrorFocus!==!0,w=++n,U=(r,m)=>{x(`validation${r===!0?"Success":"Error"}`,m)},B=r=>{const m=r.validate();return typeof m.then=="function"?m.then(c=>({valid:c,comp:r}),c=>({valid:!1,comp:r,err:c})):Promise.resolve({valid:m,comp:r})};return(o.greedy===!0?Promise.all(d.map(B)).then(r=>r.filter(m=>m.valid!==!0)):d.reduce((r,m)=>r.then(()=>B(m).then(c=>{if(c.valid===!1)return Promise.reject(c)})),Promise.resolve()).catch(r=>[r])).then(r=>{if(r===void 0||r.length===0)return w===n&&U(!0),!0;if(w===n){const{comp:m,err:c}=r[0];if(c!==void 0&&console.error(c),U(!1,m),p===!0){const I=r.find(({comp:M})=>typeof M.focus=="function"&&ie(M.$)===!1);I!==void 0&&I.comp.focus()}}return!1})}function _(){n++,d.forEach(a=>{typeof a.resetValidation=="function"&&a.resetValidation()})}function R(a){a!==void 0&&D(a);const p=n+1;i().then(w=>{p===n&&w===!0&&(o.onSubmit!==void 0?x("submit",a):(a==null?void 0:a.target)!==void 0&&typeof a.target.submit=="function"&&a.target.submit())})}function E(a){a!==void 0&&D(a),x("reset"),ne(()=>{_(),o.autofocus===!0&&o.noResetFocus!==!0&&b()})}function b(){ae(()=>{if(s.value===null)return;const a=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),p=>p.tabIndex!==-1);a==null||a.focus({preventScroll:!0})})}$(re,{bindComponent(a){d.push(a)},unbindComponent(a){const p=d.indexOf(a);p!==-1&&d.splice(p,1)}});let F=!1;return ee(()=>{F=!0}),te(()=>{F===!0&&o.autofocus===!0&&b()}),se(()=>{o.autofocus===!0&&b()}),Object.assign(f.proxy,{validate:i,resetValidation:_,submit:R,reset:E,focus:b,getValidationComponents:()=>d}),()=>J("form",{class:"q-form",ref:s,onSubmit:R,onReset:E},le(e.default))}}),H="/assets/smallTrans.6a567283.png",S="/assets/linkedin_signin.bea8279a.png";const fe={name:"Page-Login",emits:["close"],props:{signupOn:{required:!0},isProvider:{required:!1},guest:{type:Object},suppressRouter:{type:Boolean}},components:{},data(){return{tab:"login",isPwd:!0,email:"",password:"",busy:!1,error:!1,errorMessage:!1,signup:{name:"",email:"",password:"",hash:null},reset:{email:""},signupBusy:!1,signupErrorMessage:""}},methods:{...ue(xe,["login","loginWithKey","saveData"]),googleCallback(o){Q.postGoogle(this.processGoogle,this.$errorFunction,o)},processGoogle(o){this.saveData(o),this.$emit("close",o),this.busy=!1},submit(){this.busy=!0;const o={login:this.email,password:this.password};this.login(o).then(e=>{this.$emit("close",e.data),this.busy=!1}).catch(e=>{this.error=!0,this.busy=!1,console.log(e),this.errorMessage=e.response.data.message.message,console.warn(e)})},goSignup(){this.busy=!0,Q.postSignup(o=>{this.busy=!1,this.saveData(o),this.$emit("close",o),this.suppressRouter||this.$router.push("/successful-signup")},o=>{console.error(o),this.busy=!1,this.signupErrorMessage="Email address already registered"},this.signup)},goReset(){this.busy=!0,Q.postReset(()=>{this.busy=!1,this.tab="resetSuccess"},o=>{console.error(o),this.busy=!1},this.reset)},errorHandler(o){this.error=!0,this.errorMessage=o.message},goStart(){this.$emit("close"),this.$router.push("/start")},setGuest(){this.guest&&(this.tab="signup",this.signup.name=this.guest.name,this.signup.email=this.guest.email)},linkedin(){let o="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let f=0;for(;f<10;)o+=e.charAt(Math.floor(Math.random()*e.length)),f+=1;G.set("linkedin_state",o),G.set("linkedin_location",window.location.href);const s=window.location.origin+"/linkedin",n="https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=78oqnbi4db4s0g&redirect_uri="+s+"&state="+o+"&scope=r_liteprofile%20r_emailaddress";window.location.href=n}},computed:{canSignup(){return this.signup.email.length>0&&this.signup.name.length>0&&this.signup.password.length>0}},watch:{guest(){this.setGuest()}},created(){this.tab=this.signupOn?"signup":"login",this.setGuest()}},ye={class:"row full-width justify-center flex items-center"},be={class:"row q-mt-md q-py-md"},we={class:"col"},ve={class:"col text-right"},ke={class:"row q-mt-md hidden"},qe={class:"col text-center"},Ce={class:"row q-mt-none q-mb-md hidden"},Se={class:"col text-center"},Ve={class:"row q-mt-md hidden"},Pe={class:"col"},Le={class:"col text-right"},Qe={class:"row full-width flex-center x-text-heavy x-text-md q-mt-lg"},_e={key:0,class:"text-red q-mb-none x-text-heavy text-center"},Re={class:"row full-width justify-center flex items-center"},Ee={class:"row q-mt-md q-py-md"},Fe={class:"col"},Ue={class:"col text-right"},Be={class:"row q-mt-md hidden"},Ie={class:"col text-center"},Me={class:"row full-width flex-center x-text-heavy x-text-md q-mt-lg"},Ae={key:0,class:"x-text-heavy text-red full-width text-center q-mt-lg"},Te={class:"col full-width flex justify-center items-center"},De={class:"x-text-light x-text-md q-mb-xl"};function Ge(o,e,x,f,s,n){const d=me("GoogleLogin");return y(),V(ge,{class:N(["flex bg-white x-login-card",{"flex-center":o.$q.platform.is.desktop}]),style:pe(o.$q.platform.is.desktop?"width: 500px; max-width: 90vw;":"")},{default:u(()=>[l(ce,{class:N(["full-width",{"no-border no-shadow q-px-none":o.$q.platform.is.mobile}])},{default:u(()=>[s.tab==="login"||s.tab==="signup"?(y(),V(Y,{key:0,modelValue:s.tab,"onUpdate:modelValue":e[0]||(e[0]=i=>s.tab=i),"indicator-color":"primary","content-class":"x-text-heavy x-text-xl hidden","no-caps":""},{default:u(()=>[l(A,{"content-class":"x-text-heavy x-text-xl",label:"Sign Up",name:"signup"}),x.guest?k("",!0):(y(),V(A,{key:0,label:"Log In",name:"login"}))]),_:1},8,["modelValue"])):k("",!0),l(Z,{modelValue:s.tab,"onUpdate:modelValue":e[19]||(e[19]=i=>s.tab=i),class:"q-mt-none"},{default:u(()=>[l(v,{name:"login",class:"q-pt-none"},{default:u(()=>[t("div",{onKeyup:e[7]||(e[7]=L((...i)=>n.submit&&n.submit(...i),["enter"]))},[t("div",ye,[l(T,{onClick:e[1]||(e[1]=i=>o.$router.push("/")),src:H,"spinner-color":"white",fetchpriority:"high",alt:"LearnFlow Logo","no-native-menu":"",fit:"fill",heightx:"48px",widthx:"40px",style:{heightx:"48px","max-width":"60px"},class:"q-mr-md qx-my-md"}),e[20]||(e[20]=t("div",{class:"x-name flex items-center text-bold text-black",style:{"font-size":"34px!important"}},[t("span",null,[q("Learn"),t("span",{class:"text-accent"},"Flow")])],-1))]),l(O,{class:"q-mt-md"}),e[25]||(e[25]=t("h1",{class:"q-py-none no-margin hidden text-center full-width x-text-lg",style:{height:"30px","line-height":"30px"}},"Log in with",-1)),t("div",be,[t("div",we,[l(d,{callback:n.googleCallback,prompt:"",class:"col-6"},null,8,["callback"])]),t("div",ve,[l(g,{onClick:n.linkedin,"no-shadow":"",class:"col-6 q-pa-none",flat:"",style:{"max-height":"38px!important"}},{default:u(()=>[...e[21]||(e[21]=[t("img",{style:{"max-height":"38px!important","max-width":"198px"},src:S,class:"full-width"},null,-1)])]),_:1},8,["onClick"])])]),t("div",ke,[t("div",qe,[l(d,{callback:n.googleCallback,prompt:"",class:"col-6"},null,8,["callback"])])]),t("div",Ce,[t("div",Se,[l(g,{onClick:n.linkedin,"no-shadow":"",class:"col-6 q-pa-none",flat:"",style:{"max-height":"38px!important"}},{default:u(()=>[...e[22]||(e[22]=[t("img",{style:{"max-height":"38px!important","max-width":"198px"},src:S,class:"full-width"},null,-1)])]),_:1},8,["onClick"])])]),e[26]||(e[26]=t("div",{class:"row flex items-center q-mb-md"},[t("span",{class:"col",style:{height:"1px",border:"1px solid rgb(243, 243, 243)"}}),t("span",{class:"text-bold q-mx-sm"},"OR"),t("span",{class:"col",style:{height:"1px",border:"1px solid rgb(243, 243, 243)"}})],-1)),l(he,null,{default:u(()=>[l(h,{autofocus:"",modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=i=>s.email=i),color:"black",outlined:"",placeholder:"Username",type:"text",class:"q-mb-md x-text-dark-grey bg-white"},null,8,["modelValue"]),l(C),t("div",null,[l(h,{autocomplete:"current-password",color:"black",outlined:"",modelValue:s.password,"onUpdate:modelValue":e[4]||(e[4]=i=>s.password=i),type:s.isPwd?"password":"text",placeholder:"Password",class:"x-text-dark-grey"},{append:u(()=>[l(K,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer text-font",onClick:e[3]||(e[3]=i=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),t("div",Ve,[t("div",Pe,[l(d,{callback:n.googleCallback,prompt:"",class:"col-6"},null,8,["callback"])]),t("div",Le,[l(g,{onClick:n.linkedin,"no-shadow":"",class:"col-6 q-pa-none",flat:"",style:{"max-height":"38px!important"}},{default:u(()=>[...e[23]||(e[23]=[t("img",{style:{"max-height":"38px!important","max-width":"198px"},src:S,class:"full-width"},null,-1)])]),_:1},8,["onClick"])])])]),_:1}),t("p",Qe,[e[24]||(e[24]=q("Don't have an account yet?",-1)),t("a",{clickable:"",onClick:e[5]||(e[5]=i=>s.tab="signup"),class:"text-primary q-ml-sm"},"Sign Up")]),t("p",{onClick:e[6]||(e[6]=i=>s.tab="reset"),class:"row full-width flex-center x-text-heavy text-primary x-text-md q-mt-lg"},"Forgot password?"),s.error?(y(),j("p",_e,P(s.errorMessage),1)):k("",!0),l(g,{rounded:"",onClick:n.submit,disabled:s.busy,color:"primary",label:"Login",class:"full-width q-mt-lg x-text-heavy x-text-md",style:{height:"50px"}},null,8,["onClick","disabled"])],32)]),_:1}),l(v,{name:"signup"},{default:u(()=>[t("div",Re,[l(T,{onClick:e[8]||(e[8]=i=>o.$router.push("/")),src:H,"spinner-color":"white",fetchpriority:"high",alt:"LearnFlow Logo","no-native-menu":"",fit:"fill",heightx:"48px",widthx:"40px",style:{heightx:"48px","max-width":"60px"},class:"q-mr-md qx-my-md"}),e[27]||(e[27]=t("div",{class:"x-name flex items-center text-bold text-black",style:{"font-size":"34px!important"}},[t("span",null,[q("Learn"),t("span",{class:"text-accent"},"Flow")])],-1))]),l(O,{class:"q-mt-md"}),e[30]||(e[30]=t("h1",{class:"q-py-none no-margin hidden text-center full-width x-text-lg",style:{height:"30px","line-height":"30px"}},"Log in with",-1)),t("div",Ee,[t("div",Fe,[l(d,{callback:n.googleCallback,prompt:"",class:"col-6"},null,8,["callback"])]),t("div",Ue,[l(g,{onClick:n.linkedin,"no-shadow":"",class:"col-6 q-pa-none",flat:"",style:{"max-height":"38px!important"}},{default:u(()=>[...e[28]||(e[28]=[t("img",{style:{"max-height":"38px!important","max-width":"198px"},src:S,class:"full-width"},null,-1)])]),_:1},8,["onClick"])])]),t("div",Be,[t("div",Ie,[l(d,{callback:n.googleCallback,prompt:"",class:"col-6"},null,8,["callback"])])]),e[31]||(e[31]=t("div",{class:"row flex items-center q-mb-md"},[t("span",{class:"col",style:{height:"1px",border:"1px solid rgb(243, 243, 243)"}}),t("span",{class:"text-bold q-mx-sm"},"OR"),t("span",{class:"col",style:{height:"1px",border:"1px solid rgb(243, 243, 243)"}})],-1)),t("div",{onKeyup:e[14]||(e[14]=L(z((...i)=>n.goSignup&&n.goSignup(...i),["stop"]),["enter"]))},[l(h,{autofocus:!this.guest,modelValue:s.signup.name,"onUpdate:modelValue":e[9]||(e[9]=i=>s.signup.name=i),color:"black",outlined:"",placeholder:"Name",type:"text",class:"q-mb-lg text-black","input-class":"x-text-dark-grey"},null,8,["autofocus","modelValue"]),l(C),l(h,{readonly:!!x.guest,modelValue:s.signup.email,"onUpdate:modelValue":e[10]||(e[10]=i=>s.signup.email=i),color:"black",outlined:"",placeholder:"Email",type:"email",class:"q-mb-lg","input-class":"x-text-dark-grey bg-white"},null,8,["readonly","modelValue"]),l(C),l(h,{autofocus:!!this.guest,autocomplete:"new-password",outlined:"",color:"black",modelValue:s.signup.password,"onUpdate:modelValue":e[12]||(e[12]=i=>s.signup.password=i),type:s.isPwd?"password":"text",placeholder:"Password","input-class":"x-text-dark-grey bg-white"},{append:u(()=>[l(K,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer text-font",onClick:e[11]||(e[11]=i=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["autofocus","modelValue","type"]),t("p",Me,[e[29]||(e[29]=q("Already have an account?",-1)),t("a",{clickable:"",onClick:e[13]||(e[13]=i=>s.tab="login"),class:"text-primary q-ml-sm"},"Click here")]),l(g,{rounded:"",disabled:!n.canSignup,onClick:n.goSignup,color:"primary",label:"Sign Up",class:"full-width q-mt-lg x-text-heavy x-text-md",style:{height:"50px"}},null,8,["disabled","onClick"]),s.signupErrorMessage?(y(),j("div",Ae,P(s.signupErrorMessage),1)):k("",!0)],32)]),_:1}),l(v,{name:"reset",style:{height:"322px"}},{default:u(()=>[t("div",{onKeyup:e[17]||(e[17]=L(z((...i)=>n.goReset&&n.goReset(...i),["stop"]),["enter"]))},[e[32]||(e[32]=t("p",{class:"x-text-heavy x-text-lg"},"Reset your password",-1)),l(h,{autofocus:"",modelValue:s.reset.email,"onUpdate:modelValue":e[15]||(e[15]=i=>s.reset.email=i),color:"black",outlined:"",placeholder:"Email Address",type:"email",class:"q-mb-lg","input-class":"x-text-dark-grey bg-white"},null,8,["modelValue"]),e[33]||(e[33]=t("p",null,"We will email you instructions for resetting your password.",-1)),l(C),l(g,{rounded:"",disabled:s.reset.email.length===0||s.busy,onClick:n.goReset,color:"primary",label:"Reset My Password",class:"full-width q-mt-lg x-text-heavy x-text-md",style:{height:"50px"}},null,8,["disabled","onClick"]),t("p",{onClick:e[16]||(e[16]=i=>s.tab="login"),class:"row full-width flex-center x-text-heavy text-primary x-text-md q-mt-lg"},"Back To Log In")],32)]),_:1}),l(v,{name:"resetSuccess",style:{height:"322px"},class:"column q-pt-none"},{default:u(()=>[t("div",Te,[t("div",null,[e[36]||(e[36]=t("p",{class:"x-text-heavy x-text-lg"},"In the next 24 hours, you must follow these steps",-1)),t("ul",De,[t("li",null,"Open the email sent to "+P(s.reset.email),1),e[34]||(e[34]=t("li",null,"Click the link in the email to be taken to the page where you will create a new password",-1)),e[35]||(e[35]=t("li",null,"Save the new password.",-1))]),l(g,{onClick:e[18]||(e[18]=i=>s.tab="login"),color:"primary",label:"Back To Log In",class:"full-width q-mt-lg x-text-heavy x-text-md",style:{height:"50px"}})])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1},8,["style","class"])}var He=de(fe,[["render",Ge],["__scopeId","data-v-17722892"]]);export{He as L,C as Q,he as a};

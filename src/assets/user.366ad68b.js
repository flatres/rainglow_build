import{E as n,aq as l,ao as s}from"./index.a0b9c180.js";var u={postLinkedin(e,i,t){n.post("/user/login/linkedin",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i(o)})},postGoogle(e,i,t){n.post("/user/login/google",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i(o)})},postSignup(e,i,t){n.post("/user/signup",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i(o)})},postGuestSignup(e,i,t){n.post("/user/signup/guest",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i()})},postVerify(e,i,t){n.post("/user/verify",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i()})},postReset(e,i,t){n.post("/user/reset",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i(o)})},postResetPassword(e,i,t){n.post("/user/reset/password",t).then(o=>{e(o.data)}).catch(o=>{console.log(o),i(o)})}};const a=l("user",{state:()=>({userId:null,auth:null,name:null,email:null,about:null,isAdmin:null,notifications:[],profileUrl:null,cookiesAccepted:!0,isProvider:!1,geoCountryId:null,geoCountry:null,geoContinent:null,geoIp:null,geoCurrency:null,geoCurrencySymbol:null,geoPhonePrefix:null}),getters:{profile:e=>({name:e.name,email:e.email,about:e.about,profileUrl:e.profileUrl}),geo:e=>({geoCountryId:e.geoCountryId,geoCountry:e.geoCountry,geoContinent:e.geoContinent,geoIp:e.geoIp,geoCurrency:e.geoCurrency,geoCurrencySymbol:e.geoCurrencySymbol,geoPhonePrefix:e.geoPhonePrefix}),isLoggedIn:e=>e.auth!==null&&e.auth!==!1},actions:{increment(){this.counter++},softLogout(){},login(e){return new Promise((i,t)=>{n.post("/user/login",{login:e.login,password:e.password}).then(o=>{this.cookiesAccepted=!0,this.saveData(o.data),i(o.data)}).catch(o=>{t(o)})})},loginWithKey(e){this.saveData(e)},tryAutoLogin(){this.getGeo();const e=s.getItem("auth");if(console.log("suto",e),e){this.cookiesAccepted=!0;const i=s.getItem("userId");return this.saveData({auth:e,userId:i,name:s.getItem("name"),email:s.getItem("email"),isAdmin:s.getItem("isAdmin"),about:s.getItem("about"),oneSignal:s.getItem("oneSignal"),profileUrl:s.getItem("profileUrl"),isProvider:s.getItem("isProvider")}),this.setAxiosHeader(e),!0}else return!1},logout(){s.clear(),this.saveData({auth:!1,userId:!1,name:!1,email:!1,about:!1,isAdmin:!1,oneSignal:!1,profileUrl:null,isProvider:null}),this.setAxiosHeader("")},saveData(e){this.auth=e.auth,this.userId=e.userId,this.name=e.name,this.email=e.email,this.about=e.about,this.isAdmin=e.isAdmin,this.oneSignal=e.oneSignal,this.profileUrl=e.profileUrl,this.isProvider=e.isProvider,this.setAxiosHeader(e.auth),this.saveToLocal(e),console.log(this.isLoggedIn)},saveToLocal(e){s.set("auth",e.auth),s.set("userId",e.userId),s.set("isAdmin",e.isAdmin),s.set("email",e.email),s.set("about",e.about),s.set("oneSignal",e.oneSignal),s.set("name",e.name),s.set("profileUrl",e.profileUrl),s.set("isProvider",e.isProvider)},acceptCookies(){},setAxiosHeader(e){n.defaults.headers.common.Authorization=e},getGeo(){return new Promise((e,i)=>{n.get("/user/geo").then(t=>{console.log("geo",t.data),this.geoCountryId=t.data.id,this.geoCountry=t.data.country,this.geoContinent=t.data.continent,this.geoIp=t.data.ip,this.geoCurrency=t.data.isoCurrency,this.geoCurrencySymbol=t.data.curencySymbol,this.geoPhonePrefix=t.data.phonePrefix,e(t.data)}).catch(t=>{i(t)})})}}});export{u as S,a as u};

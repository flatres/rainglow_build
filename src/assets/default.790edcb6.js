import{Q as G}from"./QPageContainer.ea8637dd.js";import{k as A,l as K,w as H,o as L,m as $,n as B,p as Y,g as O,q as _,t as J,u as X,r as p,v as N,x as E,h as b,y as T,c as m,z as C,A as Z,a as ee,B as te,C as oe,D as ie,P as g,_ as ne,E as le,G as re,H as ae,I as k,f as Q}from"./index.217e6a9a.js";import{_axios as I}from"./axios.5152fdf9.js";const{passive:F}=_,se=["both","horizontal","vertical"];var ue=A({name:"QScrollObserver",props:{axis:{type:String,validator:e=>se.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:K},emits:["scroll"],setup(e,{emit:a}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,r,c;H(()=>e.scrollTarget,()=>{l(),d()});function s(){o==null||o();const v=Math.max(0,J(r)),w=X(r),f={top:v-t.position.top,left:w-t.position.left};if(e.axis==="vertical"&&f.top===0||e.axis==="horizontal"&&f.left===0)return;const x=Math.abs(f.top)>=Math.abs(f.left)?f.top<0?"up":"down":f.left<0?"left":"right";t.position={top:v,left:w},t.directionChanged=t.direction!==x,t.delta=f,t.directionChanged===!0&&(t.direction=x,t.inflectionPoint=t.position),a("scroll",{...t})}function d(){r=Y(c,e.scrollTarget),r.addEventListener("scroll",n,F),n(!0)}function l(){r!==void 0&&(r.removeEventListener("scroll",n,F),r=void 0)}function n(v){if(v===!0||e.debounce===0||e.debounce==="0")s();else if(o===null){const[w,f]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];o=()=>{f(w),o=null}}}const{proxy:h}=O();return H(()=>h.$q.lang.rtl,s),L(()=>{c=h.$el.parentNode,d()}),$(()=>{o==null||o(),l()}),Object.assign(h,{trigger:n,getPosition:()=>t}),B}});function ce(){const e=p(!N.value);return e.value===!1&&L(()=>{e.value=!0}),{isHydrated:e}}const V=typeof ResizeObserver!="undefined",M=V===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var W=A({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:a}){let t=null,o,r={width:-1,height:-1};function c(l){l===!0||e.debounce===0||e.debounce==="0"?s():t===null&&(t=setTimeout(s,e.debounce))}function s(){if(t!==null&&(clearTimeout(t),t=null),o){const{offsetWidth:l,offsetHeight:n}=o;(l!==r.width||n!==r.height)&&(r={width:l,height:n},a("resize",r))}}const{proxy:d}=O();if(d.trigger=c,V===!0){let l;const n=h=>{o=d.$el.parentNode,o?(l=new ResizeObserver(c),l.observe(o),s()):h!==!0&&E(()=>{n(!0)})};return L(()=>{n()}),$(()=>{t!==null&&clearTimeout(t),l!==void 0&&(l.disconnect!==void 0?l.disconnect():o&&l.unobserve(o))}),B}else{let h=function(){t!==null&&(clearTimeout(t),t=null),n!==void 0&&(n.removeEventListener!==void 0&&n.removeEventListener("resize",c,_.passive),n=void 0)},v=function(){h(),o!=null&&o.contentDocument&&(n=o.contentDocument.defaultView,n.addEventListener("resize",c,_.passive),s())};const{isHydrated:l}=ce();let n;return L(()=>{E(()=>{o=d.$el,o&&v()})}),$(h),()=>{if(l.value===!0)return b("object",{class:"q--avoid-card-border",style:M.style,tabindex:-1,type:"text/html",data:M.url,"aria-hidden":"true",onLoad:v})}}}}),de=A({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:a,emit:t}){const{proxy:{$q:o}}=O(),r=p(null),c=p(o.screen.height),s=p(e.container===!0?0:o.screen.width),d=p({position:0,direction:"down",inflectionPoint:0}),l=p(0),n=p(N.value===!0?0:T()),h=m(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),v=m(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),w=m(()=>n.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${n.value}px`}:null),f=m(()=>n.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${n.value}px`,width:`calc(100% + ${n.value}px)`}:null);function x(i){if(e.container===!0||document.qScrollPrevented!==!0){const u={position:i.position.top,direction:i.direction,directionChanged:i.directionChanged,inflectionPoint:i.inflectionPoint.top,delta:i.delta.top};d.value=u,e.onScroll!==void 0&&t("scroll",u)}}function U(i){const{height:u,width:y}=i;let S=!1;c.value!==u&&(S=!0,c.value=u,e.onScrollHeight!==void 0&&t("scrollHeight",u),R()),s.value!==y&&(S=!0,s.value=y),S===!0&&e.onResize!==void 0&&t("resize",i)}function j({height:i}){l.value!==i&&(l.value=i,R())}function R(){if(e.container===!0){const i=c.value>l.value?T():0;n.value!==i&&(n.value=i)}}let z=null;const q={instances:{},view:m(()=>e.view),isContainer:m(()=>e.container),rootRef:r,height:c,containerHeight:l,scrollbarWidth:n,totalWidth:m(()=>s.value+n.value),rows:m(()=>{const i=e.view.toLowerCase().split(" ");return{top:i[0].split(""),middle:i[1].split(""),bottom:i[2].split("")}}),header:C({size:0,offset:0,space:!1}),right:C({size:300,offset:0,space:!1}),footer:C({size:0,offset:0,space:!1}),left:C({size:300,offset:0,space:!1}),scroll:d,animate(){z!==null?clearTimeout(z):document.body.classList.add("q-body--layout-animate"),z=setTimeout(()=>{z=null,document.body.classList.remove("q-body--layout-animate")},155)},update(i,u,y){q[i][u]=y}};if(Z(oe,q),T()>0){let y=function(){i=null,u.classList.remove("hide-scrollbar")},S=function(){if(i===null){if(u.scrollHeight>o.screen.height)return;u.classList.add("hide-scrollbar")}else clearTimeout(i);i=setTimeout(y,300)},P=function(D){i!==null&&D==="remove"&&(clearTimeout(i),y()),window[`${D}EventListener`]("resize",S)},i=null;const u=document.body;H(()=>e.container!==!0?"add":"remove",P),e.container!==!0&&P("add"),ee(()=>{P("remove")})}return()=>{const i=te(a.default,[b(ue,{onScroll:x}),b(W,{onResize:U})]),u=b("div",{class:h.value,style:v.value,ref:e.container===!0?void 0:r,tabindex:-1},i);return e.container===!0?b("div",{class:"q-layout-container overflow-hidden",ref:r},[b(W,{onResize:j}),b("div",{class:"absolute-full",style:w.value},[b("div",{class:"scroll",style:f.value},[u])])]):u}}});ie("user",{state:()=>({userId:null,auth:null,name:null,email:null}),getters:{profile:e=>({name:e.name,email:e.email,about:e.about,profileUrl:e.profileUrl}),isLoggedIn:e=>e.auth!==null&&e.auth!==!1},actions:{increment(){this.counter++},softLogout(){},login(e){return new Promise((a,t)=>{I.post("/user/login",{login:e.login,password:e.password}).then(o=>{this.cookiesAccepted=!0,this.saveData(o.data),a(o.data)}).catch(o=>{t(o)})})},loginWithKey(e){this.saveData(e)},tryAutoLogin(){this.getGeo();const e=g.getItem("auth");if(console.log("suto",e),e){this.cookiesAccepted=!0;const a=g.getItem("userId");return this.saveData({auth:e,userId:a,name:g.getItem("name"),email:g.getItem("email"),isAdmin:g.getItem("isAdmin")}),this.setAxiosHeader(e),!0}else return!1},logout(){g.clear(),this.saveData({auth:!1,userId:!1,name:!1,email:!1}),this.setAxiosHeader("")},saveData(e){this.auth=e.auth,this.userId=e.userId,this.name=e.name,this.email=e.email,this.setAxiosHeader(e.auth),this.saveToLocal(e),console.log(this.isLoggedIn)},saveToLocal(e){g.set("auth",e.auth),g.set("userId",e.userId),g.set("email",e.email)},acceptCookies(){},setAxiosHeader(e){I.defaults.headers.common.Authorization=e},getGeo(){return new Promise((e,a)=>{I.get("/user/geo").then(t=>{console.log("geo",t.data),this.geoCountryId=t.data.id,this.geoCountry=t.data.country,this.geoContinent=t.data.continent,this.geoIp=t.data.ip,this.geoCurrency=t.data.isoCurrency,this.geoCurrencySymbol=t.data.curencySymbol,this.geoPhonePrefix=t.data.phonePrefix,e(t.data)}).catch(t=>{a(t)})})}}});const fe={name:"Layout-Default",data(){return{}},methods:{},computed:{},watch:{},created(){},mounted(){},components:{}};function he(e,a,t,o,r,c){const s=le("router-view");return re(),ae(de,{view:e.view,class:"no-scroll overflow-hidden"},{default:k(()=>[Q(G,{class:"x-scrollY xxs no-scroll overflow-hidden no-border"},{default:k(()=>[Q(s,{onScrollOn:a[0]||(a[0]=d=>e.hideMobileFooter=!0),onScrollOff:a[1]||(a[1]=d=>e.hideMobileFooter=!1),class:"no-border"})]),_:1})]),_:1},8,["view"])}var be=ne(fe,[["render",he]]);export{be as default};

import{Q as q}from"./QSelect.ba7174b6.js";import{u as L,S as c}from"./selectApi.926667b8.js";import{_ as N,p as E,I as T,m as H,v as j,aa as z,r as v,c as A,w as p,ai as W,ah as G,C as J,o as K,D as X,h as w,z as Y,ad as Z,bu as m,al as P,ae as _,bt as F,ac as ee,bv as V,b3 as te,g as ie}from"./index.a0b9c180.js";const se={name:"category-select",props:{exclusions:{type:Array,default:()=>[]},categoryId:{type:Number},keep:{type:Boolean,default:!1},any:{type:Boolean,default:!1},label:{type:String,default:"Search"},available:{type:Boolean,default:!1},courses:{type:Boolean,default:!1},providers:{type:Boolean,default:!1},filled:{type:Boolean,default:!1},courseCountryId:{type:Number},dark:{type:Boolean}},emits:["change","update:categoryId"],data(){return{categories:[],categoriesOptions:[],categoriesOptionsFiltered:[],category:null,$q:L(),loading:!0}},methods:{processCategories(e){this.any&&this.loading&&e.unshift({id:0,name:"All"}),this.categoriesOptions=e.map(t=>this.exclusions.find(o=>o.value===t.id)?null:{value:t.id,label:t.name}),this.categories=e,this.categoriesOptions=this.categoriesOptions.filter(t=>t!==null),this.categoriesOptionsFiltered=this.categoriesOptions,this.categoryId!==null&&this.loading&&(this.category=this.categoriesOptions.find(t=>t.value===this.categoryId)),this.loading=!1},categoryFilterFn(e,t,o){t(()=>{if(!e)return this.categoriesOptions;const a=e.toLowerCase();this.categoriesOptionsFiltered=this.categoriesOptions.filter(i=>i.label.toLowerCase().indexOf(a)>-1)})},addCategory(e){this.$emit("update:categoryId",this.category.value),this.category&&this.$emit("change",this.category),this.keep||(this.category=null,this.$refs.categories.updateInputValue(null)),this.$refs.categories.hidePopup(),this.processCategories(this.categories)}},computed:{popupStyle(){return this.dark?"color: white!important; background: var(--q-primary); width: 300px":""}},watch:{exclusions(){this.processCategories(this.categories)},courseCountryId(e){c.getCoursesCategoriesCountry(this.processCategories,()=>{},e)},categoryId(e){e===0&&(this.category={value:0,label:"All"})}},created(){this.any&&(this.categoriesOptions=[{value:0,name:"any"}],this.categoriesOptionsFiltered=[{value:0,name:"any"}])},mounted(){this.available?this.courses?c.getAvailableCategoriesCourses(this.processCategories,()=>{},this.$i18n.locale):c.getAvailableCategoriesProviders(this.processCategories,()=>{},this.$i18n.locale):this.courseCountryId?c.getCoursesCategoriesCountry(this.processCategories,()=>{},this.countryId):c.getCategories(this.processCategories,()=>{},this.$i18n.locale)}};function le(e,t,o,a,i,n){return i.categoriesOptions.length>0?(E(),T(q,{key:0,ref:"categories",class:"col text-bold q-ml-sm",outlined:!o.filled,filled:o.filled,square:"",dense:"",modelValue:i.category,"onUpdate:modelValue":[t[0]||(t[0]=d=>i.category=d),n.addCategory],options:i.categoriesOptionsFiltered,label:o.label,"bg-color":o.dark?"primary":"white",dark:o.dark,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","popup-content-style":n.popupStyle,onFilter:n.categoryFilterFn},null,8,["outlined","filled","modelValue","options","onUpdate:modelValue","label","bg-color","dark","popup-content-style","onFilter"])):H("",!0)}var ce=N(se,[["render",le]]);const oe={name:"country-select",props:{exclusions:{type:Array,default:()=>[]},keep:{type:Boolean,default:!1},countryId:{type:Number},any:{type:Boolean,default:!1},label:{type:String,default:"Search"},available:{type:Boolean,default:!1},courses:{type:Boolean,default:!1},providers:{type:Boolean,default:!1},filled:{type:Boolean,default:!1},phone:{type:Boolean,default:!1},dark:{type:Boolean,required:!1}},emits:["change","update:countryId"],data(){return{countries:[],countriesOptions:[],countriesOptionsFiltered:[],country:null,$q:L(),loading:!0}},methods:{processCountries(e){this.any&&this.loading&&e.unshift({id:0,name:"All"}),this.countriesOptions=e.map(t=>this.exclusions.find(o=>o.value===t.id)?null:{value:t.id,label:this.phone?t.name+" (+"+t.phonePrefix+")":t.name}),this.countries=e,this.countriesOptions=this.countriesOptions.filter(t=>t!==null),this.countriesOptionsFiltered=this.countriesOptions,this.countryId!==null&&this.loading&&(this.country=this.countriesOptions.find(t=>t.value===this.countryId)),this.loading=!1},countryFilterFn(e,t,o){t(()=>{if(!e)return this.countriesOptions;const a=e.toLowerCase();this.countriesOptionsFiltered=this.countriesOptions.filter(i=>i.label.toLowerCase().indexOf(a)>-1)})},addCountry(e){this.$emit("update:countryId",this.country.value),this.country&&this.$emit("change",this.country),this.keep||(this.country=null,this.$refs.countries.updateInputValue(null)),this.$refs.countries.hidePopup(),this.processCountries(this.countries)}},computed:{popupStyle(){return this.dark?"color: white!important; background: var(--q-primary); width: 300px":""}},watch:{exclusions(){this.processCountries(this.countries)},initial(){},countryId(e){e===0&&(this.country={value:0,label:"All"})}},created(){this.any&&(this.countriesOptions=[{value:0,label:"All"}],this.countriesOptionsFiltered=[{value:0,label:"All"}])},mounted(){this.available?this.courses?c.getAvailableCountriesCourses(this.processCountries,this.$errorHandler,this.$i18n.locale):c.getAvailableCountriesProviders(this.processCountries,this.$errorHandler,this.$i18n.locale):c.getCountries(this.processCountries,this.$errorHandler,this.$i18n.locale)}};function re(e,t,o,a,i,n){return i.countriesOptions.length>0?(E(),T(q,{key:0,ref:"countries",class:"col text-bold q-ml-sm text-none",outlined:!o.filled,filled:o.filled,roundedx:"",square:"",dense:"",modelValue:i.country,"onUpdate:modelValue":[t[0]||(t[0]=d=>i.country=d),n.addCountry],options:i.countriesOptionsFiltered,"popup-content-class":"x-dark","input-class":"x-dark",label:o.label,"bg-color":o.dark?"primary":"none",dark:o.dark,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",onFilter:n.countryFilterFn,"popup-content-style":n.popupStyle,offset:"[50,50]"},null,8,["outlined","filled","modelValue","options","onUpdate:modelValue","label","bg-color","dark","onFilter","popup-content-style"])):H("",!0)}var de=N(oe,[["render",re],["__scopeId","data-v-1e7163a4"]]);const{passive:f}=Z;var fe=j({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:z,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:o}){const a=v(!1),i=v(!0),n=v(null),d=v(null);let y=e.initialIndex,s,r;const Q=A(()=>"q-infinite-scroll__loading"+(a.value===!0?"":" invisible"));function h(){if(e.disable===!0||a.value===!0||i.value===!1)return;const l=m(s),u=_(s),g=V(s);e.reverse===!1?Math.round(u+g+e.offset)>=Math.round(l)&&b():Math.round(u)<=e.offset&&b()}function b(){if(e.disable===!0||a.value===!0||i.value===!1)return;y++,a.value=!0;const l=m(s);o("load",y,u=>{i.value===!0&&(a.value=!1,P(()=>{if(e.reverse===!0){const g=m(s),M=_(s),R=g-l;F(s,M+R)}u===!0?C():n.value&&n.value.closest("body")&&r()}))})}function U(){y=0}function x(){i.value===!1&&(i.value=!0,s.addEventListener("scroll",r,f)),h()}function C(){var l;i.value===!0&&(i.value=!1,a.value=!1,s.removeEventListener("scroll",r,f),(l=r==null?void 0:r.cancel)==null||l.call(r))}function O(){if(s&&i.value===!0&&s.removeEventListener("scroll",r,f),s=ee(n.value,e.scrollTarget),i.value===!0){if(s.addEventListener("scroll",r,f),e.reverse===!0){const l=m(s),u=V(s);F(s,l-u)}h()}}function $(l){y=l}function B(l){l=parseInt(l,10);const u=r;r=l<=0?h:te(h,isNaN(l)===!0?100:l),s&&i.value===!0&&(u!==void 0&&s.removeEventListener("scroll",u,f),s.addEventListener("scroll",r,f))}function I(l){if(k.value===!0){if(d.value===null){l!==!0&&P(()=>{I(!0)});return}const u=`${a.value===!0?"un":""}pauseAnimations`;Array.from(d.value.getElementsByTagName("svg")).forEach(g=>{g[u]()})}}const k=A(()=>e.disable!==!0&&i.value===!0);p([a,k],()=>{I()}),p(()=>e.disable,l=>{l===!0?C():x()}),p(()=>e.reverse,()=>{a.value===!1&&i.value===!0&&h()}),p(()=>e.scrollTarget,O),p(()=>e.debounce,B);let S=!1;W(()=>{S!==!1&&s&&F(s,S)}),G(()=>{S=s?_(s):!1}),J(()=>{i.value===!0&&s.removeEventListener("scroll",r,f)}),K(()=>{B(e.debounce),O(),a.value===!1&&I()});const D=ie();return Object.assign(D.proxy,{poll:()=>{r==null||r()},trigger:b,stop:C,reset:U,resume:x,setIndex:$,updateScrollTarget:O}),()=>{const l=X(t.default,[]);return k.value===!0&&l[e.reverse===!1?"push":"unshift"](w("div",{ref:d,class:Q.value},Y(t.loading))),w("div",{class:"q-infinite-scroll",ref:n},l)}}});export{ce as C,fe as Q,de as a};

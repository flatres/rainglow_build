import{_ as V,p as l,k as d,t as a,f as r,Q as f,bE as A,G as M,H as g,J as i,I as c,V as q,m as u,M as y,P as O,O as b,Y as j,a1 as B,a2 as L,S as Q,R as x,a0 as v,aH as N,L as E,K as C,F as K,N as G,bp as J}from"./index.a0b9c180.js";import{a as D,Q as P}from"./QScrollArea.9b72a6ed.js";import{Q as k}from"./QSkeleton.820e7de6.js";import{Q as X}from"./QVirtualScroll.d4802c6e.js";import{C as Y,a as Z,Q as $}from"./QInfiniteScroll.4727592b.js";import{b as T}from"./QChip.965b654f.js";import{L as ee,Q as se}from"./login.79107c96.js";import{a as te,b as re,c as oe,Q as ie}from"./QToolbar.1e1fd264.js";import{Q as le}from"./QPage.01e9a962.js";import{T as S}from"./QList.fb8789d5.js";import{A as w,C as ne}from"./socialShare.74dd5828.js";import{C as ae}from"./courseCard.7c012996.js";import{C as ce}from"./course.6c357a85.js";import{S as ue}from"./sort.a57a8ce5.js";import{u as de}from"./user.366ad68b.js";import"./TouchPan.59d47c9f.js";import"./format.959830d0.js";import"./QSelect.ba7174b6.js";import"./selectApi.926667b8.js";import"./QImg.37311f50.js";import"./_commonjsHelpers.8402d862.js";import"./use-fullscreen.a0d51d97.js";const he={name:"Search-Public-Profile",props:{},emits:["exit"],data(){return{}},methods:{close(){console.log("closing"),this.$emit("exit")}},computed:{},components:{},created(){}},fe={class:"flex window-height window-width items-start justify-center x-background-hint content-start"},pe={class:"row x-row full-width flex justify-start text-left bg-white"},me={class:"row x-row"};function ge(t,s,h,p,e,n){return l(),d("div",fe,[a("div",pe,[r(f,{label:"Back",flat:"",onClick:n.close},null,8,["onClick"]),s[0]||(s[0]=a("h1",null,"Course Profile",-1))]),a("div",me,[r(f,{class:"col",label:"Contact Provider"})])])}var we=V(he,[["render",ge]]);const ye={name:"Search-Public",props:{},data(){return{active:null,activeListing:0,jobTitle:"",selectedCountry:null,selectedCourse:null,clientOptions:["All Clients"],courseOptionsFiltered:[],searchOpen:!1,profileOpen:!1,results:[],resultsCount:null,search:{categoryId:0,countryId:0,text:null,currency:"USD",sortField:"startDate",sortDirection:"asc"},durations:[],categories:[],showSearch:!0,loginOpen:!1,courseDrawerOpen:!1,courseWidth:200,courseId:null,resizeTimer:null,noResults:!1,view:"list",favourites:[],loading:!1,drawerLeft:!0,scrollLoading:!1,page:1,limit:20,total:0,showPage:!1,itemHeight:200,scrollFactor:10,drawerReady:!1,lastScrollTop:0,toolbarHidden:!1}},methods:{onScroll(t){if(!this.isMobile)return;const s=t.verticalPosition;s>this.lastScrollTop+5?(this.toolbarHidden=!0,this.$emit("scrollOn")):s<this.lastScrollTop-5&&!this.scrollLoading&&(this.toolbarHidden=!1,this.$emit("scrollOff")),this.lastScrollTop=s},openCourse(t,s){this.courseId=t.id,this.courseDrawerOpen=!0,this.$nextTick(()=>{requestAnimationFrame(()=>{this.drawerReady=!0})}),A.postCourseClick(()=>{},null,t.id)},onDrawerShow(){this.drawerReady=!0},closeLogin(t){this.loginOpen=!1},clearSearch(){this.search.countryId=0,this.search.categoryId=0,this.search.text="",this.goSearch()},goSearch(){this.searchOpen=!1,this.loading=!0,this.scrollLoading=!1,this.$q.platform.is.mobile&&this.results.length>0&&(this.drawerLeft=!1),this.page=1,this.results=[],this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.$refs.infiniteScroll.trigger(),w.getFavouritesCourses(t=>{this.favourites=t,this.searchOpen=!0})},isFavourite(t){return this.favourites.some(s=>s.id===t)},setFavourite(){return!1},goProfile(t){this.$router.push({query:{id:t}}),this.profileOpen=!0},closeProfile(){this.profileOpen=!1,this.$router.push({query:{}})},processDurations(t){this.durations=t},updateWidth(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.$nextTick(()=>{this.$refs.search&&(this.courseWidth=this.$q.screen.width-this.$refs.search.$el.offsetWidth-20,this.courseWidth>700&&(this.courseWidth=700),this.courseWidth=700),this.$q.platform.is.mobile&&(this.courseWidth=this.$q.screen.width)})},50)},loadMore(t,s){this.scrollLoading||(this.scrollLoading=!0,w.postSearchCoursesPages(h=>{this.results.push(...h.results),this.resultsCount=h.count,this.page++,this.loading=!1,this.noResults=this.results.length===0,h.results.length<this.limit?s(!0):s(),this.scrollLoading=!1},()=>{s(!0),this.scrollLoading=!1},this.limit,this.page,this.search))},setScroll(){this.$nextTick(()=>{const t=this.$el.querySelector(".x-course-card");t&&(this.itemHeight=t.offsetHeight)})}},computed:{...M(de,["isLoggedIn","userId","guest","cookiesAccepted","geoCountryId","geoCurrency"]),tabStyle(){const t=this.courseWidth;return this.courseDrawerOpen?"right: "+t+"px":""},resultClass(){return this.view==="list"?"col-12":"col"},isMobile(){return this.$q.platform.is.mobile},itemsPerRow(){return this.view==="list"||this.$q.screen.lt.sm||this.$q.screen.lt.md?1:this.$q.screen.lt.lg?2:3},chunkedResults(){const t=[],s=this.itemsPerRow;let h=-1;for(let p=0;p<this.results.length;p+=s){const e=this.results.slice(p,p+s);for(;e.length<s;)e.push({id:h--});t.push(e)}return t}},components:{Profile:we,Categories:Y,Countries:Z,CourseCard:ae,CourseRibbon:ne,Course:ce,Sort:ue,Login:ee},mounted(){this.isLoggedIn||(this.loginOpen=!0),this.courseOptionsFiltered=this.courseOptions,this.updateWidth(),window.addEventListener("resize",this.updateWidth),this.scrollLoading=!1,this.geoCountryId&&(this.search.countryId=this.geoCountryId,this.showPage=!0,this.$nextTick(()=>{this.search.currency=this.geoCurrency,this.goSearch()})),this.setScroll()},beforeUnmount(){window.removeEventListener("resize",this.updateWidth)},created(){w.getCoursesDurations(this.processDurations,()=>{}),w.getCategories(t=>{this.categories=t})},watch:{geoCountryId(t){this.search.countryId=t,t>=0&&(this.showPage=!0,this.$nextTick(()=>{this.goSearch()}))},geoCurrency(t){t&&(this.search.currency=t)},view(){this.setScroll()},courseDrawerOpen(t){t||(this.drawerReady=!1)}}},be={class:"q-pa-none fit"},xe={class:"row fit"},ve={key:0,class:"q-pa-md scroll fit"},Ce={key:0,class:"row justify-start content-start items-start col-12 q-pr-sm q-pt-md items-stretch"},ke={class:"full-width"},Se={class:"full-width text-center q-mt-xl"},_e={key:1,class:"row justify-center",style:{height:"100vh!important","margin-top":"76px"}},Ie={key:1,class:"x-course-card"},qe={class:"row justify-center q-my-md full-width"},Oe={class:"mobile-only text-right col"};function Le(t,s,h,p,e,n){const z=g("countries"),R=g("categories"),_=g("course"),F=g("sort"),H=g("login");return l(),d("div",be,[r(te,{view:"hHh LpR lFf",container:"",class:"no-border fit"},{default:i(()=>[y((l(),c(D,{modelValue:e.drawerLeft,"onUpdate:modelValue":s[4]||(s[4]=o=>e.drawerLeft=o),width:250,"show-if-above":"",behavior:n.isMobile?"mobile":"desktop",borderedx:"",flat:"",class:"bg-primary","content-class":"scroll",ref:"search"},{default:i(()=>[a("div",xe,[r(O,{flat:"",squares:"",class:"no-border bg-primary"},{default:i(()=>[r(b,{class:"bg-primary text-white q-py-sm no-border"},{default:i(()=>[...s[15]||(s[15]=[a("div",{class:"text-h6 text-bold"},"Courses",-1)])]),_:1}),r(b,{class:"flex q-px-xs q-pb-none bg-primary"},{default:i(()=>[r(z,{onChange:s[0]||(s[0]=o=>{n.goSearch()}),keep:"",any:"",dark:"",availablex:"",courses:"",filled:"",countryId:e.search.countryId,"onUpdate:countryId":s[1]||(s[1]=o=>e.search.countryId=o),class:"col-12 q-mb-md full-width",label:"Location"},null,8,["countryId"]),r(j),r(R,{onChange:n.goSearch,courseCountryId:e.search.countryId,keep:"",any:"",available:"",courses:"",filled:"",dark:"",categoryId:e.search.categoryId,"onUpdate:categoryId":s[2]||(s[2]=o=>e.search.categoryId=o),label:"Category",class:"col-12 q-mb-md full-width",stylex:"max-width:200px"},null,8,["onChange","courseCountryId","categoryId"])]),_:1}),r(b,{class:"flex q-pt-none q-pl-xs q-pr-md"},{default:i(()=>[r(B,{class:"col-12 full-width text-bold q-pl-none","input-class":"",dense:"",dark:"",outlined:"",modelValue:e.search.text,"onUpdate:modelValue":s[3]||(s[3]=o=>e.search.text=o),label:"Search...","bg-color":"primary"},null,8,["modelValue"])]),_:1}),r(L,null,{default:i(()=>[r(f,{class:"full-width col-12 text-bold bg-accent x-button",style:{height:"40px"},rounded:"",flat:"",color:"white","no-caps":"",onClick:n.goSearch},{default:i(()=>[...s[16]||(s[16]=[Q("Search",-1)])]),_:1},8,["onClick"])]),_:1}),r(L,null,{default:i(()=>[r(f,{class:"full-width col-12 text-bold bg-primary x-button",style:{height:"40px"},rounded:"",outline:"",color:"white","no-caps":"",onClick:n.clearSearch},{default:i(()=>[...s[17]||(s[17]=[Q("Clear",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["modelValue","behavior"])),[[S,()=>{t.drawerOpen=!1},void 0,{left:!0}]]),y((l(),c(q,{modelValue:e.courseDrawerOpen,"onUpdate:modelValue":s[6]||(s[6]=o=>e.courseDrawerOpen=o),"full-width":"","full-height":"",class:"mobile-only no-padding",persistent:"",maximized:"","transition-show":"slide-left","transition-hide":"slide-right"},{default:i(()=>[r(O,{class:"bg-white fit column no-scroll"},{default:i(()=>[a("div",{class:"x-close-tab-mobile z-top absolute-right flex items-center justify-center cursor-pointer",onClick:s[5]||(s[5]=v(o=>e.courseDrawerOpen=!1,["stop"]))},[r(x,{name:"chevron_right",color:"white",size:"sm"})]),r(P,{class:"fit"},{default:i(()=>[e.courseId?(l(),c(_,{key:0,courseId:e.courseId},null,8,["courseId"])):u("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),[[S,()=>{e.courseDrawerOpen=!1},void 0,{right:!0}]]),y((l(),c(D,{modelValue:e.courseDrawerOpen,"onUpdate:modelValue":s[8]||(s[8]=o=>e.courseDrawerOpen=o),onShow:n.onDrawerShow,behavior:"mobile",width:e.courseWidth,class:"desktop-only",side:"right",elevated:"",overlay:""},{default:i(()=>[a("div",{class:"x-close-tab z-top absolute-left flex items-center justify-center cursor-pointer",onClick:s[7]||(s[7]=v(o=>e.courseDrawerOpen=!1,["stop"]))},[r(x,{name:"close",color:"white",size:"xs"})]),e.drawerReady?(l(),d("div",ve,[r(_,{courseId:e.courseId},null,8,["courseId"])])):u("",!0)]),_:1},8,["modelValue","onShow","width"])),[[S,()=>{e.courseDrawerOpen=!1},void 0,{right:!0}]]),r(re,{ref:"innerPage",class:"fit"},{default:i(()=>[e.showPage?(l(),c(le,{key:0,ref:"innerPage",padding:"",class:C(["column fit x-background-hint",{"q-pl-none":!n.isMobile,"q-pl-sm":n.isMobile}])},{default:i(()=>[e.noResults&&!e.loading?(l(),d("div",Ce,[a("div",ke,[a("div",Se,[r(x,{name:"sentiment_dissatisfied",color:"accent",size:"xl",class:""})]),s[18]||(s[18]=a("h1",{class:"full-width text-bold text-grey-7 q-mt-none text-center",style:{"font-size":"25px"}},"No Courses Found",-1))])])):u("",!0),e.loading?(l(),d("div",_e,[r(k,{color:"accent",size:"80px",class:"desktop-only"}),r(k,{color:"accent",size:"30px",class:"mobile-only"})])):u("",!0),(l(),c(N,null,[r(P,{class:"fit full-width",ref:"scrollArea",onScroll:n.onScroll,style:E([{height:"calc(100vh)!important","padding-topX":"66px"},{marginTop:e.toolbarHidden?"0px":"46px"}])},{default:i(()=>{var o;return[r(X,{items:n.chunkedResults,"virtual-scroll-item-size":e.itemHeight,class:"fit full-width"},{default:i(({item:W,index:I})=>[(l(),d("div",{class:C(["row full-width",{"q-col-gutter-md":!n.isMobile}]),key:I},[(l(!0),d(K,null,G(W,m=>(l(),d("div",{key:m.id,class:"col q-pb-sm"},[m.id>0?(l(),c(J(e.view==="list"?"course-ribbon":"course-card"),{key:0,class:"x-course-card",clickable:"",onClick:v(U=>n.openCourse(m),["stop"]),onOpen:U=>n.openCourse(m),i:m,isOdd:I%2===1,durations:e.durations,categories:e.categories},null,40,["onClick","onOpen","i","isOdd","durations","categories"])):u("",!0),m.id<0?(l(),d("div",Ie)):u("",!0)]))),128))],2))]),_:1},8,["items","virtual-scroll-item-size"]),r($,{ref:"infiniteScroll",onLoad:n.loadMore,offset:e.itemHeight*e.scrollFactor,"scroll-target":(o=t.$refs.scrollArea)==null?void 0:o.getScrollTarget(),class:"full-width"},{loading:i(()=>[a("div",qe,[e.scrollLoading?(l(),c(k,{key:0,color:"primary",size:"40px"})):u("",!0)])]),_:1},8,["onLoad","offset","scroll-target"])]}),_:1},8,["onScroll","style"])],1024)),r(oe,{expand:"",position:"top",class:"q-pt-none q-pl-none"},{default:i(()=>[r(ie,{class:C(["bg-primary x-toolbar",{"x-toolbar-hidden":e.toolbarHidden}])},{default:i(()=>[r(f,{onClick:s[9]||(s[9]=o=>e.drawerLeft=!0),icon:"search",dense:"",color:"accent",outline:"",class:"mobile-only"}),r(F,{resultsType:"courses",durations:e.durations,field:e.search.sortField,"onUpdate:field":s[10]||(s[10]=o=>e.search.sortField=o),direction:e.search.sortDirection,"onUpdate:direction":s[11]||(s[11]=o=>e.search.sortDirection=o),onSort:n.goSearch,dark:""},null,8,["durations","field","direction","onSort"]),!e.noResults&&e.resultsCount>0?(l(),c(T,{key:0,label:e.resultsCount+" results",outline:"",class:"bg-primary text-accent on-right desktop-only"},null,8,["label"])):u("",!0),a("span",Oe,[!e.noResults&&e.resultsCount>0?(l(),c(T,{key:0,label:e.resultsCount,class:"bg-primary text-accent on-right"},null,8,["label"])):u("",!0)]),r(se),r(f,{onClick:s[12]||(s[12]=o=>e.view="list"),dense:"",outline:"",color:e.view==="list"?"accent":"grey-6",icon:"list",class:"on-right q-px-xs"},null,8,["color"]),r(f,{onClick:s[13]||(s[13]=o=>e.view="grid"),dense:"",outline:"",color:e.view==="grid"?"accent":"grey-6",icon:"grid_view",class:"on-right q-px-xs"},null,8,["color"])]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])):u("",!0)]),_:1},512)]),_:1}),e.loginOpen?(l(),c(q,{key:0,modelValue:e.loginOpen,"onUpdate:modelValue":s[14]||(s[14]=o=>e.loginOpen=o),class:"items-start",persistent:""},{default:i(()=>[r(H,{onClose:n.closeLogin,signupOn:!0,isProvider:"",suppressRouter:!0},null,8,["onClose"])]),_:1},8,["modelValue"])):u("",!0)])}var Ze=V(ye,[["render",Le],["__scopeId","data-v-ed6d3dee"]]);export{Ze as default};

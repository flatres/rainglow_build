import{j as k,d as y,u as C,r as L,o as v,k as w,l as b,m as q,n as E,p as I,w as T,q as O}from"./index.a0b9c180.js";Object.freeze({__proto__:null});var u={library:"https://accounts.google.com/gsi/client",defaultButtonConfig:{theme:"outline",size:"large"},scopes:"email profile openid",ssrError:"vue3-google-login cannot be executed on the server side. See here for more info https://devbaji.github.io/vue3-google-login/#no-ssr-support"};const c=k({clientId:null,popupType:"CODE",prompt:!1,autoLogin:!1,idConfiguration:null,buttonConfig:u.defaultButtonConfig,callback:()=>{},error:null}),d=k({apiLoaded:!1,apiLoadIntitited:!1}),_=()=>new Promise((o,t)=>{if(typeof window!="undefined"){if(!d.apiLoadIntitited){const e=document.createElement("script");d.apiLoadIntitited=!0,e.addEventListener("load",()=>{d.apiLoaded=!0,o(window.google)}),e.addEventListener("error",()=>{t("Failed to load the Google 3P Authorization JavaScript Library.")}),e.src=u.library,e.async=!0,e.defer=!0,document.head.appendChild(e)}}else t(u.ssrError)}),g=o=>{d.apiLoadIntitited?d.apiLoaded?o(window.google):T(()=>d.apiLoaded,t=>{t&&o(window.google)}):_().then(t=>{o(t)}).catch(t=>{throw t})},x=(o,t,e,n)=>{if(!o.client_id)throw new Error("Prop client id required since plugin is not initialized with a client id");g(()=>{((i,s,p,r,a)=>{if(a){const m=i.callback;i.callback=f=>{f.credential?m&&m(f):a(f)}}window.google.accounts.id.initialize(i);const l=s.value;l&&!r&&window.google.accounts.id.renderButton(l,p)})(o,t,e.buttonConfig,n,e.error),e.prompt&&S({clientId:e.clientId,callback:e.callback,error:e.error,autoLogin:e.autoLogin})})},z=o=>new Promise((t,e)=>{g(n=>{if(!(o&&o.clientId||c.clientId))throw new Error("clientId is required since the plugin is not initialized with a Client Id");n.accounts.oauth2.initCodeClient({client_id:o&&o.clientId||c.clientId||"",scope:u.scopes,ux_mode:"popup",callback:i=>{i.code?t(i):e(i)},error_callback:i=>{e(i)}}).requestCode()})}),B=o=>new Promise((t,e)=>{g(n=>{if(!(o&&o.clientId||c.clientId))throw new Error("clientId is required since the plugin is not initialized with a Client Id");n.accounts.oauth2.initTokenClient({client_id:o&&o.clientId||c.clientId||"",scope:u.scopes,callback:i=>{i.access_token?t(i):e(i)},error_callback:i=>{e(i)}}).requestAccessToken()})}),S=o=>{if(!o&&(o={}),!o.clientId&&!c.clientId)throw new Error("clientId is required");const t={use_fedcm_for_prompt:!0};return o.clientId&&(t.client_id=o.clientId),!o.clientId&&c.clientId&&(t.client_id=c.clientId),o.context&&(t.context=o.context),o.autoLogin!=null&&(t.auto_select=o.autoLogin),o.cancelOnTapOutside!=null&&(t.cancel_on_tap_outside=o.cancelOnTapOutside),new Promise((e,n)=>{t.callback=i=>{o&&o.callback&&o.callback(i),i.credential?e(i):n(i)},g(i=>{i.accounts.id.initialize(t),i.accounts.id.prompt()})})};var h=y({__name:"GoogleLogin",props:{clientId:{type:String,required:!1},prompt:{type:Boolean,required:!1,default:!1},autoLogin:{type:Boolean,required:!1,default:!1},popupType:{type:String,required:!1},idConfiguration:{type:Object,required:!1},buttonConfig:{type:Object,required:!1},callback:{type:Function,required:!1},error:{type:Function,required:!1}},setup(o){if(typeof window=="undefined")throw new Error(u.ssrError);const t=!!C().default,e=o,n=((p,r)=>{const a={...p};for(const l in r)r[l]!==void 0&&r[l]!==null&&(a[l]=r[l]);return a})(c,e),i={client_id:n.clientId||null,auto_select:n.autoLogin||!1,callback:n.callback,...n.idConfiguration},s=L();return v(()=>{x(i,s,n,t),e.popupType&&!t&&console.warn("Option 'popupType' is ignored since a slot which act as a custom login button was not found!!!")}),(p,r)=>(I(),w("div",{class:"g-btn-wrapper",onClick:r[0]||(r[0]=a=>b(t)&&void(b(n).popupType==="TOKEN"?B({clientId:n.clientId}).then(l=>{n.callback&&n.callback(l)}).catch(l=>{n.error&&n.error(l)}):z({clientId:n.clientId}).then(l=>{n.callback&&n.callback(l)}).catch(l=>{n.error&&n.error(l)})))},[b(t)?q("v-if",!0):(I(),w("span",{key:0,ref_key:"buttonRef",ref:s,class:"g-btn"},null,512)),E(p.$slots,"default")]))}});(function(o,t){t===void 0&&(t={});var e=t.insertAt;if(o&&typeof document!="undefined"){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(document.createTextNode(o))}})(`
.g-btn-wrapper[data-v-5e610566] {
  display: inline-block;
}
`),h.__scopeId="data-v-5e610566",h.__file="src/plugin/GoogleLogin.vue";var P={install:(o,t)=>{t&&(e=>{e.clientId&&(c.clientId=e.clientId),e.popupType&&(c.popupType=e.popupType),e.prompt!=null&&(c.prompt=e.prompt),e.autoLogin!=null&&(c.autoLogin=e.autoLogin),e.idConfiguration&&(c.idConfiguration=e.idConfiguration),e.buttonConfig&&(c.buttonConfig=e.buttonConfig),e.callback&&(c.callback=e.callback)})(t),_().then(()=>{if(t.clientId){const e={client_id:t.clientId,auto_select:t.autoLogin===!0,callback:t.callback,use_fedcm_for_prompt:!0,...t.idConfiguration};window.google.accounts.id.initialize(e),t.prompt&&window.google.accounts.id.prompt()}}).catch(e=>{if(!t.error)throw e;t.error(e)}),o.component("GoogleLogin",h)}},G=O(({app:o})=>{o.use(P,{clientId:"803494328504-enqp2ld3lvhvf7pt52k80333kcnr8sod.apps.googleusercontent.com"})});export{G as default};
